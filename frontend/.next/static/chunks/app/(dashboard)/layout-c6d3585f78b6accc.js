(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{3834:function(e,t,n){Promise.resolve().then(n.bind(n,4457))},4457:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(7437),s=n(2265),a=n(6463),i=n(7138),o=n(7440),c=n(7140),l=n(1240),u=n(500),h=n(1432),d=n(2940),g=n(7422),m=n(4258),p=n(9896),v=n(7402);let f=[{name:"Dashboard",href:"/",icon:c.Z},{name:"Identities",href:"/identities",icon:l.Z},{name:"Policies",href:"/policies",icon:u.Z},{name:"Audit Log",href:"/audit",icon:h.Z},{name:"Approvals",href:"/approvals",icon:d.Z},{name:"Anchors",href:"/anchors",icon:g.Z},{name:"Settings",href:"/settings",icon:m.Z}];function y(){var e;let t=(0,a.usePathname)(),{user:n,logout:s}=(0,v.t)();return(0,r.jsxs)("div",{className:"flex h-full w-64 flex-col bg-gray-900",children:[(0,r.jsx)("div",{className:"flex h-16 items-center px-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-indigo-600",children:(0,r.jsx)(u.Z,{className:"h-5 w-5 text-white"})}),(0,r.jsx)("span",{className:"text-xl font-bold text-white",children:"GuardRail"})]})}),(0,r.jsx)("nav",{className:"flex-1 space-y-1 px-3 py-4",children:f.map(e=>{let n=t===e.href||"/"!==e.href&&t.startsWith(e.href);return(0,r.jsxs)(i.default,{href:e.href,className:(0,o.cn)("group flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",n?"bg-gray-800 text-white":"text-gray-400 hover:bg-gray-800 hover:text-white"),children:[(0,r.jsx)(e.icon,{className:"h-5 w-5 flex-shrink-0"}),e.name]},e.name)})}),(0,r.jsx)("div",{className:"border-t border-gray-800 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-gray-700",children:(0,r.jsx)("span",{className:"text-sm font-medium text-white",children:(null==n?void 0:null===(e=n.email)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"truncate text-sm font-medium text-white",children:(null==n?void 0:n.email)||"User"}),(0,r.jsx)("p",{className:"truncate text-xs text-gray-400",children:(null==n?void 0:n.role)||"Role"})]}),(0,r.jsx)("button",{onClick:()=>s(),className:"rounded-lg p-2 text-gray-400 hover:bg-gray-800 hover:text-white",title:"Logout",children:(0,r.jsx)(p.Z,{className:"h-4 w-4"})})]})})]})}function x(e){let{children:t}=e,n=(0,a.useRouter)(),{token:i,checkAuth:o}=(0,v.t)();return((0,s.useEffect)(()=>{(async()=>{await o()||n.push("/auth/login")})()},[o,n]),i)?(0,r.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,r.jsx)(y,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"p-8",children:t})})]}):(0,r.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,r.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-gray-300 border-t-indigo-600"})})}},6264:function(e,t,n){"use strict";let r=n(357).env.NEXT_PUBLIC_API_URL||"http://localhost:3000";class s{setToken(e){this.token=e,e?localStorage.setItem("guardrail_token",e):localStorage.removeItem("guardrail_token")}getToken(){return this.token||(this.token=localStorage.getItem("guardrail_token")),this.token}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(r).concat(e),s=this.getToken(),a={"Content-Type":"application/json",...t.headers};s&&(a.Authorization="Bearer ".concat(s));try{let e=await fetch(n,{...t,headers:a}),r=await e.json();if(!e.ok)return{success:!1,error:r.error||{code:"UNKNOWN",message:"Request failed"}};return r}catch(e){return{success:!1,error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async login(e,t){let n=await this.request("/api/v1/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return n.success&&n.data&&this.setToken(n.data.token),n}logout(){this.setToken(null)}async listIdentities(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0,r=new URLSearchParams({page:e.toString(),per_page:t.toString()});return n&&r.set("search",n),this.request("/api/v1/identities?".concat(r))}async getIdentity(e){return this.request("/api/v1/identities/".concat(e))}async createIdentity(e){return this.request("/api/v1/identities",{method:"POST",body:JSON.stringify(e)})}async updateIdentity(e,t){return this.request("/api/v1/identities/".concat(e),{method:"PATCH",body:JSON.stringify(t)})}async deleteIdentity(e){return this.request("/api/v1/identities/".concat(e),{method:"DELETE"})}async listPolicies(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=new URLSearchParams({page:e.toString(),per_page:t.toString(),active_only:n.toString()});return this.request("/api/v1/policies?".concat(r))}async getPolicy(e){return this.request("/api/v1/policies/".concat(e))}async createPolicy(e){return this.request("/api/v1/policies",{method:"POST",body:JSON.stringify(e)})}async activatePolicy(e){return this.request("/api/v1/policies/".concat(e,"/activate"),{method:"POST"})}async deactivatePolicy(e){return this.request("/api/v1/policies/".concat(e,"/deactivate"),{method:"POST"})}async simulatePolicy(e,t){return this.request("/api/v1/policies/".concat(e,"/simulate"),{method:"POST",body:JSON.stringify(t)})}async checkAction(e){return this.request("/api/v1/check",{method:"POST",body:JSON.stringify(e)})}async listEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2?arguments[2]:void 0,r=new URLSearchParams({page:e.toString(),per_page:t.toString()});return n&&Object.entries(n).forEach(e=>{let[t,n]=e;void 0!==n&&r.set(t,n.toString())}),this.request("/api/v1/events?".concat(r))}async getEvent(e){return this.request("/api/v1/events/".concat(e))}async getEventProof(e){return this.request("/api/v1/events/".concat(e,"/proof"))}async getLedgerStats(){return this.request("/api/v1/ledger/stats")}async listApprovals(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0,r=new URLSearchParams({page:e.toString(),per_page:t.toString()});return n&&r.set("status",n),this.request("/api/v1/approvals?".concat(r))}async approveAction(e,t){return this.request("/api/v1/approvals/".concat(e,"/approve"),{method:"POST",body:JSON.stringify({comment:t})})}async rejectAction(e,t){return this.request("/api/v1/approvals/".concat(e,"/reject"),{method:"POST",body:JSON.stringify({reason:t})})}async listAnchors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0,r=new URLSearchParams({page:e.toString(),per_page:t.toString()});return n&&r.set("status",n),this.request("/api/v1/anchors?".concat(r))}async getAnchor(e){return this.request("/api/v1/anchors/".concat(e))}async triggerAnchor(){return this.request("/api/v1/anchors/trigger",{method:"POST"})}async getDashboardStats(){return this.request("/api/v1/dashboard/stats")}constructor(){this.token=null}}let a=new s;t.Z=a},7440:function(e,t,n){"use strict";n.d(t,{BK:function(){return c},FP:function(){return l},TY:function(){return d},cn:function(){return a},o0:function(){return o},p6:function(){return i},xG:function(){return u},z2:function(){return h}});var r=n(4839),s=n(6164);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}function i(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function o(e){return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function c(e){let t=new Date,n=new Date(e),r=Math.floor((t.getTime()-n.getTime())/1e3);return r<60?"just now":r<3600?"".concat(Math.floor(r/60),"m ago"):r<86400?"".concat(Math.floor(r/3600),"h ago"):r<604800?"".concat(Math.floor(r/86400),"d ago"):i(e)}function l(e){return e.length<=10?e:"".concat(e.slice(0,6),"...").concat(e.slice(-4))}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",n="string"==typeof e?parseFloat(e):e;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"===t||"USDC"===t||"USDT"===t?"USD":void 0,maximumFractionDigits:2}).format(n)}function h(e){switch(e){case"PENDING":return"text-yellow-600 bg-yellow-100";case"APPROVED":case"CONFIRMED":return"text-green-600 bg-green-100";case"REJECTED":case"FAILED":return"text-red-600 bg-red-100";case"EXPIRED":default:return"text-gray-600 bg-gray-100";case"ANCHORING":return"text-blue-600 bg-blue-100"}}function d(e){switch(e){case"HUMAN":return"\uD83D\uDC64";case"AGENT":return"\uD83E\uDD16";case"ORGANIZATION":return"\uD83C\uDFE2";default:return"â“"}}},7402:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(9099),s=n(9291),a=n(6264);let i=(0,r.Ue)()((0,s.tJ)((e,t)=>({user:null,token:null,isLoading:!1,error:null,login:async(t,n)=>{var r;e({isLoading:!0,error:null});let s=await a.Z.login(t,n);return s.success&&s.data?(e({user:s.data.user,token:s.data.token,isLoading:!1}),!0):(e({error:(null===(r=s.error)||void 0===r?void 0:r.message)||"Login failed",isLoading:!1}),!1)},logout:()=>{a.Z.logout(),e({user:null,token:null,error:null})},checkAuth:async()=>{let{token:e}=t();return!!e&&(a.Z.setToken(e),!0)}}),{name:"guardrail-auth",partialize:e=>({user:e.user,token:e.token})}))}},function(e){e.O(0,[575,151,245,971,23,744],function(){return e(e.s=3834)}),_N_E=e.O()}]);