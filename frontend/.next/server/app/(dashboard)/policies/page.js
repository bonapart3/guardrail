(()=>{var e={};e.id=649,e.ids=[649],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5150:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(4990),s(8032),s(5866),s(1506);var r=s(3191),a=s(8716),l=s(7922),i=s.n(l),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["(dashboard)",{children:["policies",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4990)),"C:\\Users\\tyler\\Downloads\\guardrail-complete\\guardrail\\frontend\\app\\(dashboard)\\policies\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8032)),"C:\\Users\\tyler\\Downloads\\guardrail-complete\\guardrail\\frontend\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"C:\\Users\\tyler\\Downloads\\guardrail-complete\\guardrail\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\tyler\\Downloads\\guardrail-complete\\guardrail\\frontend\\app\\(dashboard)\\policies\\page.tsx"],u="/(dashboard)/policies/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/policies/page",pathname:"/policies",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1522:(e,t,s)=>{Promise.resolve().then(s.bind(s,6879))},6879:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(326),a=s(7577),l=s(3353),i=s.n(l),n=s(3071),o=s(1190),d=s(4432),c=s(567),u=s(851);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,u.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);var m=s(3855),x=s(8307),f=s(165);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,u.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),y=(0,u.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),g=(0,u.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var j=s(6824),v=s(7863);let b=i()(async()=>{},{loadableGenerated:{modules:["app\\(dashboard)\\policies\\page.tsx -> @monaco-editor/react"]},ssr:!1,loading:()=>r.jsx("div",{className:"flex h-96 items-center justify-center bg-gray-900 rounded-lg",children:r.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-gray-600 border-t-indigo-500"})})}),N=`# GuardRail Policy
# Define rules to evaluate actions

package guardrail

import future.keywords.if
import future.keywords.in
import future.keywords.contains

default deny := []
default require_approval := []

# Example: Deny if amount exceeds limit
deny contains "Amount exceeds limit" if {
    input.action.action_type == "WITHDRAWAL"
    to_number(input.action.amount) > 100000
}

# Example: Require approval for large transactions
require_approval contains "risk_officer" if {
    input.action.action_type == "WITHDRAWAL"
    to_number(input.action.amount) > 10000
}
`;function w(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!0),[i,u]=(0,a.useState)(""),[w,_]=(0,a.useState)(!1),[C,P]=(0,a.useState)(null),[S,k]=(0,a.useState)(N),[R,Z]=(0,a.useState)(""),[D,A]=(0,a.useState)(""),[E,L]=(0,a.useState)(!1),[O,q]=(0,a.useState)(!1),[M,z]=(0,a.useState)(null),I=async()=>{l(!0);let e=await j.Z.listPolicies(1,100,!1);if(e.success&&e.data){let s=e.data.items;i&&(s=s.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.description?.toLowerCase().includes(i.toLowerCase()))),t(s)}l(!1)},W=()=>{P(null),k(N),Z(""),A(""),z(null),_(!0)},U=e=>{P(e),k(e.rego_source),Z(e.name),A(e.description||""),z(null),_(!0)},Y=async()=>{if(!R.trim()){alert("Please enter a policy name");return}L(!0);let e=await j.Z.createPolicy({name:R,description:D||void 0,rego_source:S});e.success?(_(!1),I()):alert(`Failed to save policy: ${e.error?.message}`),L(!1)},$=async()=>{if(!C)return;q(!0);let e=await j.Z.simulatePolicy(C.id,{identity:{id:"test-user",type:"HUMAN",display_name:"Test User",credentials:[{type:"KYC_LEVEL",provider:"test",value:{level:2}}]},action:{action_type:"WITHDRAWAL",amount:"50000",asset:"USDC",target_address:"0x1234567890123456789012345678901234567890"},context:{timestamp:new Date().toISOString(),ip_address:"192.168.1.1"}});e.success&&e.data?z(e.data):alert(`Simulation failed: ${e.error?.message}`),q(!1)},T=async e=>{(e.is_active?await j.Z.deactivatePolicy(e.id):await j.Z.activatePolicy(e.id)).success&&I()};return w?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:C?"Edit Policy":"Create Policy"}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Write Rego rules to define your compliance policies"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(o.z,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),C&&(0,r.jsxs)(o.z,{variant:"outline",onClick:$,disabled:O,children:[r.jsx(p,{className:"mr-2 h-4 w-4"}),O?"Simulating...":"Simulate"]}),r.jsx(o.z,{onClick:Y,disabled:E,children:E?"Saving...":"Save Policy"})]})]}),r.jsx(n.Zb,{children:r.jsx(n.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Policy Name"}),r.jsx(d.I,{value:R,onChange:e=>Z(e.target.value),placeholder:"e.g., withdrawal-limits"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx(d.I,{value:D,onChange:e=>A(e.target.value),placeholder:"e.g., Enforce withdrawal limits based on KYC tier"})]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[r.jsx("div",{className:"lg:col-span-2",children:(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{className:"py-3 px-4 border-b",children:r.jsx(n.ll,{className:"text-sm font-medium",children:"Rego Source"})}),r.jsx(n.aY,{className:"p-0",children:r.jsx(b,{height:"500px",language:"rego",theme:"vs-dark",value:S,onChange:e=>k(e||""),options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0}})})]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(n.Zb,{children:[r.jsx(n.Ol,{className:"py-3 px-4 border-b",children:r.jsx(n.ll,{className:"text-sm font-medium",children:"Simulation Result"})}),r.jsx(n.aY,{className:"p-4",children:M?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Decision:"}),r.jsx(c.C,{variant:"ALLOW"===M.decision?"success":"DENY"===M.decision?"destructive":"warning",children:M.decision})]}),M.reasons?.length>0&&(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Reasons:"}),r.jsx("ul",{className:"mt-1 list-disc pl-5 text-sm text-gray-600",children:M.reasons.map((e,t)=>r.jsx("li",{children:e},t))})]}),M.required_approvers?.length>0&&(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm font-medium",children:"Required Approvers:"}),r.jsx("div",{className:"mt-1 flex flex-wrap gap-1",children:M.required_approvers.map((e,t)=>r.jsx(c.C,{variant:"outline",children:e},t))})]})]}):r.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"Run a simulation to see results"})})]}),(0,r.jsxs)(n.Zb,{className:"mt-4",children:[r.jsx(n.Ol,{className:"py-3 px-4 border-b",children:r.jsx(n.ll,{className:"text-sm font-medium",children:"Sample Input (Read-only)"})}),r.jsx(n.aY,{className:"p-4",children:r.jsx("pre",{className:"text-xs bg-gray-50 p-3 rounded overflow-auto max-h-48",children:`{
  "identity": {
    "type": "HUMAN",
    "credentials": [
      { "type": "KYC_LEVEL", "value": { "level": 2 } }
    ]
  },
  "action": {
    "action_type": "WITHDRAWAL",
    "amount": "50000",
    "asset": "USDC"
  }
}`})})]})]})]})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Policies"}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Define and manage compliance rules with Rego"})]}),(0,r.jsxs)(o.z,{onClick:W,children:[r.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Create Policy"]})]}),r.jsx(n.Zb,{children:r.jsx(n.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(x.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),r.jsx(d.I,{placeholder:"Search policies...",value:i,onChange:e=>u(e.target.value),className:"pl-10"})]})})}),s?r.jsx("div",{className:"flex h-64 items-center justify-center",children:r.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-gray-300 border-t-indigo-600"})}):0===e.length?r.jsx(n.Zb,{children:(0,r.jsxs)(n.aY,{className:"flex h-64 flex-col items-center justify-center",children:[r.jsx(f.Z,{className:"h-12 w-12 text-gray-300"}),r.jsx("p",{className:"mt-4 text-lg font-medium text-gray-900",children:"No policies found"}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Create your first policy to start enforcing rules"}),(0,r.jsxs)(o.z,{className:"mt-4",onClick:W,children:[r.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Create Policy"]})]})}):r.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,r.jsxs)(n.Zb,{className:"overflow-hidden",children:[r.jsx(n.Ol,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx(n.ll,{className:"text-lg",children:e.name}),e.description&&r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.description})]}),e.is_active?r.jsx(c.C,{variant:"success",children:"Active"}):r.jsx(c.C,{variant:"secondary",children:"Inactive"})]})}),r.jsx(n.aY,{children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:["Version ",e.version]}),r.jsx("span",{children:"â€¢"}),r.jsx("span",{children:(0,v.p6)(e.created_at)})]}),(0,r.jsxs)("pre",{className:"text-xs bg-gray-50 p-2 rounded max-h-24 overflow-hidden",children:[e.rego_source.slice(0,200),"..."]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t",children:[(0,r.jsxs)(o.z,{variant:"ghost",size:"sm",onClick:()=>U(e),children:[r.jsx(h,{className:"mr-1 h-4 w-4"}),"View"]}),r.jsx(o.z,{variant:"ghost",size:"sm",onClick:()=>T(e),children:e.is_active?(0,r.jsxs)(r.Fragment,{children:[r.jsx(y,{className:"mr-1 h-4 w-4"}),"Deactivate"]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(g,{className:"mr-1 h-4 w-4"}),"Activate"]})})]})]})})]},e.id))})]})}},1190:(e,t,s)=>{"use strict";s.d(t,{z:()=>h});var r=s(326),a=s(7577),l=s.t(a,2);function i(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var n=Symbol.for("react.lazy"),o=l[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===n&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=function(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:s,...r}=e;if(d(s)&&"function"==typeof o&&(s=o(s._payload)),a.isValidElement(s)){var l;let e,n;let o=(l=s,(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref),d=function(e,t){let s={...t};for(let r in t){let a=e[r],l=t[r];/^on[A-Z]/.test(r)?a&&l?s[r]=(...e)=>{let t=l(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...l}:"className"===r&&(s[r]=[a,l].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==a.Fragment&&(d.ref=t?function(...e){return t=>{let s=!1,r=e.map(e=>{let r=i(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():i(e[t],null)}}}}(t,o):o),a.cloneElement(s,d)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=a.forwardRef((e,s)=>{let{children:l,...i}=e;d(l)&&"function"==typeof o&&(l=o(l._payload));let n=a.Children.toArray(l),c=n.find(p);if(c){let e=c.props.children,l=n.map(t=>t!==c?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,r.jsx)(t,{...i,ref:s,children:a.isValidElement(e)?a.cloneElement(e,void 0,l):null})}return(0,r.jsx)(t,{...i,ref:s,children:l})});return s.displayName=`${e}.Slot`,s}("Slot"),u=Symbol("radix.slottable");function p(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}var m=s(9360),x=s(7863);let f=(0,m.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),h=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...l},i)=>{let n=a?c:"button";return r.jsx(n,{className:(0,x.cn)(f({variant:t,size:s,className:e})),ref:i,...l})});h.displayName="Button"},4432:(e,t,s)=>{"use strict";s.d(t,{I:()=>i});var r=s(326),a=s(7577),l=s(7863);let i=a.forwardRef(({className:e,type:t,...s},a)=>r.jsx("input",{type:t,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));i.displayName="Input"},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(851).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(851).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3353:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=s(1174);s(326),s(7577);let a=r._(s(7028));function l(e,t){var s;let r={loading:e=>{let{error:t,isLoading:s,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let l={...r,...t};return(0,a.default)({...l,modules:null==(s=l.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},933:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=s(4129);function a(e){let{reason:t,children:s}=e;throw new r.BailoutToCSRError(t)}},7028:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let r=s(326),a=s(7577),l=s(933),i=s(6618);function n(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},s=(0,a.lazy)(()=>t.loader().then(n)),d=t.loading;function c(e){let n=d?(0,r.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.PreloadCss,{moduleIds:t.modules}),(0,r.jsx)(s,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(a.Suspense,{fallback:n,children:o})}return c.displayName="LoadableComponent",c}},6618:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let r=s(326);function a(e){let{moduleIds:t}=e,{getExpectedRequestStore:a}=s(5403),l=a(),i=[];if(l.reactLoadableManifest&&t){let e=l.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));i.push(...t)}}return 0===i.length?null:(0,r.jsx)(r.Fragment,{children:i.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:l.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},4990:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var r=s(8570);let a=(0,r.createProxy)(String.raw`C:\Users\tyler\Downloads\guardrail-complete\guardrail\frontend\app\(dashboard)\policies\page.tsx`),{__esModule:l,$$typeof:i}=a;a.default;let n=(0,r.createProxy)(String.raw`C:\Users\tyler\Downloads\guardrail-complete\guardrail\frontend\app\(dashboard)\policies\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[480,430,529,764],()=>s(5150));module.exports=r})();